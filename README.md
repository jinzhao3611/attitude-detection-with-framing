# attitude-detection-with-framing
Repository for paper [Media Attitude Detection via Framing Analysis with Events and their Relations](https://aclanthology.org/2024.emnlp-main.954/)

## Structure

```
├── bert_modeling       # text classification experiments with Roberta
│   ├── __init__.py     
│   ├── bert_eval.py        # loads finetuned Roberta and saves and evaluate the predictions
│   ├── bert_train.py       # finetunes Roberta
│   └── eval_metrics.py
├── data        #loads data
│   ├── __init__.py
│   ├── file_path.py
│   ├── get_event_lemmas.py
│   ├── load_as_ecb_doc.py
│   └── load_data.py
├── flan_t5_modeling    # text generation experiments with FlanT5
│   ├── __init__.py
│   ├── flan_t5_eval.py     #saves and evaluate the predictions
│   └── prompts.py      #prompts
├── gpt_modeling        # text generation experiments with GPT-4o
│   ├── __init__.py
│   ├── gpt_eval.py     #saves and evaluate the predictions
│   └── prompts.py     #prompts
├── prepare_device_data     #extract different framing devices from the original data
│   ├── __init__.py
│   ├── device_prompts.py       #generate descriptors for each event cluster
│   ├── event_clustering.py
│   ├── prepare_device_1_3_input.py     #device 1 data are generated by excluding coreferential events to get unique events, device 3 are generated by extracting causal relations involving coreferential events
│   ├── prepare_device_1_3_output.py
│   ├── prepare_device_2_output.py
│   └── prepare_device_2_srl.py     #device 2 data are generated by concatenating the semantic roles of coreferential events
├── scripts
│   ├── __init__.py
│   ├── data_split.py
│   ├── evaluate_model_out.py
│   ├── jsd_analysis.py
│   └── prepare_model_input.py
├── source_data
│   ├── ...
│   └── putin
│       ├── cluster_0.8_0.5.txt     #event clusters
│       ├── descriptors.json        #GPT-4o generated evetn cluster descriptors
│       ├── parsed.json     #events 
│       ├── srl.jsonl       #semantic roles of events
│       ├── test.jsonl      #baseline experiment test data: input is original text
│       ├── test_device_1.jsonl     #selection and omission of events experiments: input is events descriptors
│       ├── test_device_2.jsonl     #linguistics information experiments: input is concatenating the semantic roles of events
│       ├── test_device_3.jsonl     #cause and effect experiments: input is causal relations of events descriptors
│       ├── train.jsonl
│       ├── train_device_1.jsonl
│       ├── train_device_2.jsonl
│       └── train_device_3.jsonl
└── t5_modeling     # text classification experiments with T5
    ├── __init__.py
    ├── args.json
    ├── t5_data_prep.py
    ├── t5_eval.py       # loads finetuned T5 and saves and evaluate the predictions
    └── t5_train.py     # finetunes T5
```

### Running Instructions

Edit the data and model setting in file as needed(topics: al_shifa, hk_protest, putin. devices: 1,2,3).
```
python3 -m bert_modeling.bert_train --topic hk_protest
python3 -m bert_modeling.bert_eval model_ckpts/hk_protest_roberta-base_output/checkpoint-126/ --topic hk_protest --device 3

python3 -m t5_modeling.t5_data_prep --topic putin  --device 3
python3 -m t5_modeling.t5_train --topic putin  --device 3
python3 -m t5_modeling.t5_eval model_ckpts/putin_t5-base_output/checkpoint-120/ --topic putin  --device 3

python3 -m flan_t5_modeling.flan_t5_eval --topic putin --device 1

python3 -m gpt_modeling.gpt_eval --topic putin --device 1
```